/**
 * –î–µ—Ç–µ–∫—Ü–∏—ò–∞ –ø–æ–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤—É —Å—Ä–ø—Å–∫–∏—Ö –∏–º–µ–Ω–∞
 * –ü—Ä–∞–≤–∏–ª–æ: –ú—É—à–∫–∞ –∏–º–µ–Ω–∞ –∑–∞–≤—Ä—à–∞–≤–∞—ò—É –Ω–∞ —Å—É–≥–ª–∞—Å–Ω–∏–∫, –∂–µ–Ω—Å–∫–∞ –Ω–∞ —Å–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫
 */

export function detectGender(fullName: string): 'M' | 'F' | 'Unknown' {
  // –ò–∑–≤—É—Ü–∏ –∏–º–µ (–ø—Ä–≤–æ —Ä–µ—á, –ø—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤–∫–∞: "–ü—Ä–µ–∑–∏–º–µ –ò–º–µ")
  const parts = fullName.trim().split(/\s+/);

  // –ê–∫–æ —ò–µ —Ñ–æ—Ä–º–∞—Ç "–ò–º–µ –ü—Ä–µ–∑–∏–º–µ", —É–∑–º–∏ –ø—Ä–≤—É —Ä–µ—á
  // –ê–∫–æ —ò–µ —Ñ–æ—Ä–º–∞—Ç "–ü—Ä–µ–∑–∏–º–µ –ò–º–µ", —É–∑–º–∏ –¥—Ä—É–≥—É —Ä–µ—á
  // –ó–∞ —Å—Ä–ø—Å–∫–∞ –∏–º–µ–Ω–∞, –æ–±–∏—á–Ω–æ —ò–µ "–ü—Ä–µ–∑–∏–º–µ –ò–º–µ"
  const firstName = parts.length > 1 ? parts[1] : parts[0];

  if (!firstName) return 'Unknown';

  const lastChar = firstName.slice(-1).toLowerCase();

  // –°–∞–º–æ–≥–ª–∞—Å–Ω–∏—Ü–∏ (Cyrillic)
  const vowels = ['–∞', '–µ', '–∏', '–æ', '—É', 'a', 'e', 'i', 'o', 'u'];

  // –ò–∑—É–∑–µ—Ü–∏ - –º—É—à–∫–∞ –∏–º–µ–Ω–∞ –∫–æ—ò–∞ –∑–∞–≤—Ä—à–∞–≤–∞—ò—É –Ω–∞ —Å–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫
  const maleExceptions = [
    '–Ω–∏–∫–æ–ª–∞', '–∏–ª–∏—ò–∞', '—Å–∞–≤–∞',
    'nikola', 'ilija', 'sava'
  ];

  const firstNameLower = firstName.toLowerCase();

  // –ü—Ä–æ–≤–µ—Ä–∏ –∏–∑—É–∑–µ—Ç–∫–µ
  if (maleExceptions.includes(firstNameLower)) {
    return 'M';
  }

  // –°–∞–≤–∞ –º–æ–∂–µ –±–∏—Ç–∏ –∏ –º—É—à–∫–æ –∏ –∂–µ–Ω—Å–∫–æ, –∞–ª–∏ –ø—Ä–µ—Ç–ø–æ—Å—Ç–∞–≤—ô–∞–º–æ –º—É—à–∫–æ
  if (firstNameLower === 'sava' || firstNameLower === '—Å–∞–≤–∞') {
    return 'M'; // Default to male
  }

  // –ü—Ä–∞–≤–∏–ª–æ: –°–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫ = –∂–µ–Ω—Å–∫–æ, —Å—É–≥–ª–∞—Å–Ω–∏–∫ = –º—É—à–∫–æ
  if (vowels.includes(lastChar)) {
    return 'F';
  } else {
    return 'M';
  }
}

/**
 * –¢–µ—Å—Ç–∏—Ä–∞—ö–µ —Ñ—É–Ω–∫—Ü–∏—ò–µ
 */
if (import.meta.url === `file://${process.argv[1]}`) {
  const testNames = [
    '–°—Ç–∞–Ω–∏—õ –ó–æ—Ä–∞–Ω',        // M (—Å—É–≥–ª–∞—Å–Ω–∏–∫)
    '–ú–∞—Ä–∏–Ω–∫–æ–≤–∏—õ –ñ–µ—ö–∞',    // F (—Å–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫)
    '–†–µ–≥–æ—ò–µ –ë–∏—ô–∞–Ω–∞',      // F (—Å–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫)
    '–ò–ª–∏—ò–µ–≤ –ò–≤–∞–Ω–∞',       // F (—Å–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫)
    '–í—É—ò–∞–Ω–æ–≤–∏—õ –í—É–∫',      // M (—Å—É–≥–ª–∞—Å–Ω–∏–∫)
    '–°–∏–º–∞–Ω–∏—õ –†—É–∂–∏—Ü–∞',     // F (—Å–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫)
    '–ù–∏–∫–æ–ª–∏—õ –ù–∏–∫–æ–ª–∞',     // M (–∏–∑—É–∑–µ—Ç–∞–∫!)
    '–ü–µ—Ç—Ä–æ–≤–∏—õ –ò–ª–∏—ò–∞',     // M (–∏–∑—É–∑–µ—Ç–∞–∫!)
    '–ì—Ä–æ—Å –â–∏—ô–∞–Ω–∞',       // F (—Å–∞–º–æ–≥–ª–∞—Å–Ω–∏–∫)
    '–ë—ò–µ–ª–∏—Ü–∞ –î–∞–Ω–∏–ª–æ',     // M (—Å—É–≥–ª–∞—Å–Ω–∏–∫)
    '–à–æ–≤–∞–Ω–æ–≤–∏—õ –°–∞–≤–∞',     // M (–∏–∑—É–∑–µ—Ç–∞–∫/–∞–º–±–∏–≥—É–∏—Ç–µ—Ç)
  ];

  console.log('üß™ –¢–ï–°–¢–ò–†–ê–ä–ï –î–ï–¢–ï–ö–¶–ò–à–ï –ü–û–õ–ê\n');
  console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');

  testNames.forEach(name => {
    const gender = detectGender(name);
    const genderLabel = gender === 'M' ? '–ú—É—à–∫–æ' : gender === 'F' ? '–ñ–µ–Ω—Å–∫–æ' : '–ù–µ–ø–æ–∑–Ω–∞—Ç–æ';
    console.log(`${name.padEnd(30)} ‚Üí ${genderLabel}`);
  });
}
